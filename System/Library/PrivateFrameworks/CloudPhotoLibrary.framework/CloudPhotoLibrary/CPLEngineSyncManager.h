@class NSError, NSString, NSArray, CPLSyncSession, CPLEngineForceSyncTask, NSCountedSet, CPLDerivativesFilter, CPLEngineLibrary, CPLPlatformObject, NSMutableArray, NSObject, CPLSyncStep;
@protocol CPLEngineStoreUserIdentifier, OS_dispatch_queue, CPLEngineTransportSetupTask;

@interface CPLEngineSyncManager : NSObject <CPLAbstractObject, CPLEngineComponent, CPLEngineSyncTaskDelegate, CPLEngineForceSyncTaskDelegate> {
    id<CPLEngineStoreUserIdentifier> _transportUserIdentifier;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _transportUserIdentifierLock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _brokenScopesLock;
    NSMutableArray *_brokenScopes;
    CPLDerivativesFilter *_derivativesFilter;
    BOOL _setupIsDone;
    BOOL _shouldUpdateDisabledFeatures;
    BOOL _closed;
    id<CPLEngineTransportSetupTask> _setupTask;
    id /* block */ _closingCompletionHandler;
    CPLSyncSession *_session;
    NSObject<OS_dispatch_queue> *_lock;
    NSError *_lastError;
    CPLSyncStep *_currentStep;
    id<CPLEngineTransportSetupTask> _forcedSetupTask;
    CPLEngineForceSyncTask *_currentForceSyncTask;
    CPLEngineForceSyncTask *_pendingForceSyncTask;
    unsigned long long _shouldRestartSessionFromState;
    NSMutableArray *_lastErrors;
    BOOL _foreground;
    BOOL _boostPriority;
    BOOL _hasOverridenBudgets;
    BOOL _disabledSchedulerForForceSyncTask;
    NSMutableArray *_forcedSyncHistory;
    NSMutableArray *_cancellerBlocks;
    NSCountedSet *_blockedReasons;
}

@property (nonatomic, setter=_setState:) unsigned long long state;
@property (nonatomic) BOOL shouldTryToMingleImmediately;
@property (readonly, weak, nonatomic) CPLEngineLibrary *engineLibrary;
@property (readonly, nonatomic) NSError *lastError;
@property (readonly) BOOL hasBrokenScopes;
@property (readonly) NSArray *brokenScopes;
@property (readonly, nonatomic) CPLPlatformObject *platformObject;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (unsigned int)qualityOfServiceForForcedTasks;
+ (id)platformImplementationProtocol;
+ (id)shortDescriptionForState:(unsigned long long)a0;
+ (unsigned int)qualityOfServiceForSyncSessions;
+ (id)stepForState:(unsigned long long)a0 syncManager:(id)a1 session:(id)a2;
+ (id)descriptionForState:(unsigned long long)a0;

- (id)componentName;
- (void)openWithCompletionHandler:(id /* block */)a0;
- (void)addDropDerivativesRecipe:(id)a0 writeToUserDefaults:(BOOL)a1 withCompletionHandler:(id /* block */)a2;
- (void)resetTransportUserIdentifier;
- (void)_reenableSchedulerForForceSyncTaskIfNecessary;
- (void)_forceSyncTaskDidFinishWithError:(id)a0;
- (id)initWithEngineLibrary:(id)a0;
- (void)_discardPendingForceSyncTaskWithError:(id)a0;
- (BOOL)_launchNecessaryTasksForCurrentStateLocked;
- (BOOL)prepareAndLaunchSyncTaskUnlocked:(id)a0;
- (void)_disableSchedulerForForceSyncTaskIfNecessary;
- (BOOL)_checkForegroundAtLaunchForForceSyncTask;
- (void)_cancelCurrentSyncSession;
- (void)_overrideBudgetsIfNeeded;
- (id)_transportUserIdentifier;
- (void)endClientWork:(id)a0;
- (void)_moveAllTasksToBackgroundLocked;
- (void)cancelAndBlockAllSyncSessionsWithReason:(id)a0 block:(id /* block */)a1;
- (void)startSyncSession:(id)a0 withMinimalPhase:(unsigned long long)a1 rewind:(BOOL)a2;
- (void)_addRuleToUserDefaults:(id)a0;
- (void)_restartSyncSessionFromStateLocked:(unsigned long long)a0 session:(id)a1 cancelIfNecessary:(BOOL)a2;
- (void)_advanceToNextStateLockedMinimalState:(unsigned long long)a0;
- (void)_cancelAllTasksForSetup;
- (void)addBrokenScope:(id)a0;
- (void)task:(id)a0 didProgress:(float)a1 userInfo:(id)a2;
- (id)_shortDescriptionForCurrentState;
- (void)getStatusWithCompletionHandler:(id /* block */)a0;
- (void)removeBrokenScope:(id)a0;
- (void)_advanceToNextStateLocked;
- (void)beginClientWork:(id)a0;
- (void)_cancelAllTasksLockedDeferringPushTaskCancellationIfCurrentlyUploadingForeground:(BOOL)a0;
- (void)forceSyncTaskHasBeenCancelled:(id)a0;
- (void).cxx_destruct;
- (void)setSyncSessionShouldBeForeground:(BOOL)a0;
- (id)_descriptionForLaunchedTasks;
- (void)_launchForceSyncTaskIfNecessary;
- (void)cancelCurrentSyncSession;
- (void)_recordForcedSyncTask:(id)a0 discarded:(BOOL)a1 error:(id)a2;
- (BOOL)_didFinishSetupTaskWithError:(id)a0 shouldStop:(BOOL *)a1;
- (void)discardTransportUserIdentifier;
- (void)forceSyncTaskHasBeenLaunched:(id)a0;
- (void)_dispatchCancellerBlocksIfNecessary;
- (void)getStatusDictionaryWithCompletionHandler:(id /* block */)a0;
- (void)dispatchSyncBlock:(id /* block */)a0;
- (id)_dropDerivativeRulesFromUserDefaults;
- (id)_setupTaskWithCompletionHandler:(id /* block */)a0;
- (void)_cancelAllTasksLocked;
- (void)configureDirectTransportTask:(id)a0;
- (BOOL)_launchSetupTask;
- (void)requestDisabledFeaturesUpdate;
- (id)_descriptionForCurrentState;
- (void)setBoostPriority:(BOOL)a0;
- (void)_notifyEndOfSyncSession;
- (void)_resetErrorForSyncSession;
- (void)closeAndDeactivate:(BOOL)a0 completionHandler:(id /* block */)a1;
- (void)task:(id)a0 didFinishWithError:(id)a1;
- (void)_launchForceSetupTask;
- (void)_dispatchAfter:(double)a0 block:(id /* block */)a1;
- (void)dispatchForcedTaskBlock:(id /* block */)a0;
- (id)lastErrorUnlocked;
- (void)unblockSyncSessionWithReason:(id)a0;
- (void)_setTransportUserIdentifier:(id)a0;
- (id)_descriptionForSetupTasks;
- (void)setErrorForSyncSessionUnlocked:(id)a0;

@end
