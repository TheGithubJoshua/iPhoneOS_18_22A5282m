@class NSLock, NSString, QLDiskCacheQueryOperation, QLCacheCleanUpDatabaseThread, QLMemoryCache, NSOperationQueue, NSURL, NSObject, QLServerThread, QLDiskCache;
@protocol OS_dispatch_source, OS_dispatch_queue, OS_os_transaction;

@interface _QLCacheThread : NSObject <QLDiskCacheDelegate> {
    NSOperationQueue *_memoryCacheQueryOperationQueue;
    NSObject<OS_dispatch_queue> *_writeQueue;
    NSObject<OS_dispatch_queue> *_writeCoalesceQueue;
    id /* block */ _writeBlocks[10];
    id /* block */ _cleanupBlocks[10];
    NSObject<OS_dispatch_source> *_drainTimer;
    NSObject<OS_os_transaction> *_writeTransaction;
}

@property (retain) NSObject<OS_dispatch_source> *lowDiskSpaceSource;
@property (retain) NSObject<OS_dispatch_queue> *lowDiskSpaceSourceQueue;
@property (retain) NSLock *modeLock;
@property (retain) QLDiskCacheQueryOperation *currentDiskCacheQueryOperation;
@property (retain) NSOperationQueue *diskCacheQueryOperationQueue;
@property BOOL serverThreadIsIdle;
@property (readonly) unsigned long long currentMode;
@property unsigned long long missedCount;
@property unsigned long long hitCount;
@property BOOL waitingForCleanup;
@property (retain) QLCacheCleanUpDatabaseThread *cleanUpDatabaseThread;
@property (weak) QLServerThread *serverThread;
@property (readonly) QLMemoryCache *memoryCache;
@property (readonly) QLDiskCache *diskCache;
@property (readonly) BOOL lowDiskSpace;
@property (readonly) NSString *modeDescription;
@property (retain) NSURL *diskCacheURL;
@property (nonatomic) BOOL shouldRemoveThumbnailsForDeletedFiles;

+ (long long)defaultCacheSize;

- (void)_setMode:(unsigned long long)a0;
- (BOOL)isCacheOpened;
- (void)_willStartClosedModeFromMode:(unsigned long long)a0;
- (BOOL)locked_removeCachedThumbnailsFromUninstalledFileProvidersWithIdentifiers:(id)a0;
- (void)_scheduleBlockDrain;
- (void)startWriting;
- (void)_addThumbnailRequestIntoDiskCacheQueryQueue:(id)a0;
- (void)forceCommit;
- (void)_setLowDiskSpace:(BOOL)a0;
- (void)prepareToExit;
- (void)_willStartWorkingModeFromMode:(unsigned long long)a0;
- (void)enqueueWriting:(id /* block */)a0;
- (void)_sendThumbnailData:(id)a0 forThumbnailRequest:(id)a1;
- (id)initWithServerThread:(id)a0 cacheSize:(long long)a1 location:(id)a2;
- (void)openCache;
- (unsigned long long)hitToSaveCount;
- (BOOL)setLastHitDateOfAllCachedThumbnailsToDate:(id)a0;
- (void)stopWriting;
- (id)allThumbnailsInfo;
- (void)serverIsIdle;
- (void)_drainPendingBlocks;
- (void)_willStartResetingModeFromMode:(unsigned long long)a0;
- (BOOL)_shouldQuitClosedModeForMode:(unsigned long long)a0;
- (void)_registerMachPortForLowDiskSpaceNotification;
- (void)exitImmediately;
- (BOOL)_shouldQuitPauseModeForMode:(unsigned long long)a0;
- (void).cxx_destruct;
- (BOOL)_shouldQuitCleanUpDatabaseModeForMode:(unsigned long long)a0;
- (void)_cleanUpDatabaseDone;
- (void)_scheduledDrainPendingBlocks;
- (void)serverIsWorking;
- (id)allThumbnailsForIno:(unsigned long long)a0 fsid:(struct fsid { int x0[2]; })a1;
- (id)contentDescriptionForURL:(struct __CFURL { } *)a0;
- (void)_unregisterMachPortForLowDiskSpaceNotification;
- (void)updateMode;
- (void)_willStartPauseModeFromMode:(unsigned long long)a0;
- (BOOL)isIdle;
- (id)itemsAfterFilteringOutItemsWithMissingThumbnails:(id)a0;
- (id)allThumbnailsForFileIdentifier:(id)a0;
- (id)_allThumbnailsEnumerateWithEnumerator:(id)a0;
- (void)_updateMode;
- (void)_destroyDrainTimer;
- (void)forceCommitAndClose;
- (BOOL)addThumbnailRequest:(id)a0;
- (long long)purgeOnMountPoint:(id)a0 withUrgency:(int)a1 beforeDate:(id)a2;
- (void)closeCache;
- (BOOL)locked_removeCachedThumbnailsFromUninstalledFileProvidersWithRemainingFileProviderIdentifiers:(id)a0;
- (void)_willStartLowSpaceModeFromMode:(unsigned long long)a0;
- (id)allThumbnailsForFPItemID:(id)a0;
- (void)_thumbnailHasBeenCancelled:(id)a0;
- (void)_willStartCleanUpDatabaseModeFromMode:(unsigned long long)a0;
- (id)cacheInfo;
- (void)reset;
- (BOOL)addThumbnailIntoCache:(id)a0 bitmapFormat:(id)a1 bitmapData:(id)a2 metadata:(id)a3 flavor:(int)a4 contentRect:(struct CGRect { struct CGPoint { double x0; double x1; } x0; struct CGSize { double x0; double x1; } x1; })a5 badgeType:(unsigned long long)a6 externalGeneratorDataHash:(unsigned long long)a7;
- (void)_waitForEndOfDatabaseCleanup;
- (long long)purgeableSpaceOnMountPoint:(id)a0 withUrgency:(int)a1 beforeDate:(id)a2;
- (BOOL)_shouldQuitLowSpaceModeForMode:(unsigned long long)a0;
- (BOOL)addNoThumbnailIntoCache:(id)a0;
- (void)_dispatchThumbnailRequestInServerThread:(id)a0;
- (void)noteRemoteThumbnailMissingForItems:(id)a0;
- (void)_unscheduleBlockDrain;
- (BOOL)_shouldQuitWorkingModeForMode:(unsigned long long)a0;
- (BOOL)itemIsMissingRemoteThumbnail:(id)a0;
- (void)databaseCorruptionDetected;
- (void)_updateLowDisk;
- (void)_drainPendingBlocksNow;
- (void)noteRemoteThumbnailPresentForItems:(id)a0;
- (BOOL)_shouldQuitResetingModeForMode:(unsigned long long)a0;
- (unsigned long long)thumbnailInMemoryToSaveCount;

@end
