@class NSXPCConnection, NSString, GEOObserverHashTable, NSArray, MSPSharedTripSharingIdentity, NSDate, MSPSharedTripContactController, NSMutableDictionary, NSObject, NSMutableArray, MSPMapsPaths;
@protocol OS_dispatch_queue, OS_dispatch_group;

@interface MSPSharedTripService : NSObject <MSPSharedTripXPCServer, MSPSharedTripXPCClient, MSPSharedTripContactControllerDelegate> {
    NSXPCConnection *_connection;
    BOOL _connectionError;
    NSObject<OS_dispatch_queue> *_isolationQueue;
    unsigned long long _connectionRetryCounter;
    NSDate *_reconnectionBackoffUntilDate;
    GEOObserverHashTable *_receivingObservers;
    GEOObserverHashTable *_sendingObservers;
    NSMutableArray *_receivedTrips;
    MSPSharedTripContactController *_sharingContactController;
    NSMutableDictionary *_subscriptionTokensByTripID;
    NSString *_sharingGroupIdentifier;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _sharingIdentityLock;
    unsigned long long _permissions;
    MSPSharedTripSharingIdentity *_sharingIdentity;
    NSObject<OS_dispatch_group> *_checkinDispatchGroup;
    id _userDisabledDefaultListener;
    id _serverDisabledDefaultListener;
    MSPMapsPaths *_mapsPaths;
    BOOL _confirmedMapsIsInstalled;
}

@property (readonly, nonatomic) BOOL canShareTrip;
@property (readonly, nonatomic) BOOL canReceiveTrips;
@property (readonly, nonatomic) MSPSharedTripSharingIdentity *sharingIdentity;
@property (readonly, nonatomic) NSArray *receivers;
@property (readonly, nonatomic) NSArray *receivedTrips;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedInstance;

- (id)_remoteObjectProxy;
- (void)checkin;
- (void)stopSharingWithContact:(id)a0 completion:(id /* block */)a1;
- (void)refreshReceivedTripsWithCompletion:(id /* block */)a0;
- (id)init;
- (void)sharedTripDidUpdateRecipients:(id)a0;
- (void)purgeToken:(id)a0 forTripID:(id)a1;
- (void)_fetchSharingIdentityWithCompletion:(id /* block */)a0;
- (void)_stopAllSharingWithCompletion:(id /* block */)a0;
- (void)reportUserConfirmationOfSharingIdentity:(id)a0 completion:(id /* block */)a1;
- (void)_openConnectionIfNeeded;
- (void)clearBlockedTripIdentifiers;
- (void)startSharingTripWithContacts:(id)a0 completion:(id /* block */)a1;
- (void)performBlockAfterInitialSync:(id /* block */)a0;
- (id)contactsFromArchivedTripSharingState:(id)a0;
- (void)fetchActiveHandlesWithCompletion:(id /* block */)a0;
- (void)_performBlockWhenCheckinCompleted:(id /* block */)a0;
- (void)blockSharedTripWithIdentifier:(id)a0;
- (id)archivedSharingState;
- (void)stopSharingTrip;
- (void)_startSharingTripWithMessagesContacts:(id)a0 completion:(id /* block */)a1;
- (id)_addSubscriptionTokenForTripID:(id)a0;
- (void)sharedTripContactController:(id)a0 didUpdateActiveContactsValues:(id)a1;
- (void)stopAllSharingWithCompletion:(id /* block */)a0;
- (void)_fetchSharedTripsWithCompletion:(id /* block */)a0;
- (void)_purgeToken:(id)a0 forTripID:(id)a1;
- (void)_checkin;
- (void)sharedTripDidClose:(id)a0;
- (id)_remoteObjectProxyWithErrorHandler:(id /* block */)a0;
- (void)fetchRequiresUserConfirmationOfSharingIdentityWithCompletion:(id /* block */)a0;
- (void)etaDidUpdateForSharedTrip:(id)a0;
- (void)fetchSharedTripsWithCompletion:(id /* block */)a0;
- (void)destinationReachedDidUpdateForSharedTrip:(id)a0;
- (void)_fetchRequiresUserConfirmationOfSharingIdentityWithCompletion:(id /* block */)a0;
- (void)stopSharingTripWithContacts:(id)a0;
- (void)routeDidUpdateForSharedTrip:(id)a0;
- (void)_clearBlockedTripIdentifiers;
- (void)startSharingTripWithMessagesContacts:(id)a0 completion:(id /* block */)a1;
- (void)_handleCheckinWithSharingIdentity:(id)a0 activeRecipients:(id)a1 receivedTrips:(id)a2 permissions:(unsigned long long)a3;
- (id)_insertOrUpdateTrip:(id)a0;
- (void).cxx_destruct;
- (void)startSharingWithContact:(id)a0 completion:(id /* block */)a1;
- (id)_subscriptionTokensForTripID:(id)a0 createIfNeeded:(BOOL)a1;
- (void)_performBlockAfterInitialSync:(id /* block */)a0;
- (void)_fetchActiveHandlesWithCompletion:(id /* block */)a0;
- (void)_startSharingTripWithMessagesGroup:(id)a0 completion:(id /* block */)a1;
- (void)_resetCheckinIdentityAndPermissions;
- (void)sharedTripInvalidatedWithError:(id)a0;
- (void)_startSharingWithContact:(id)a0 completion:(id /* block */)a1;
- (void)_checkEnabledState;
- (void)_startSharingTripWithContacts:(id)a0 completion:(id /* block */)a1;
- (void)sharedTripDidBecomeUnavailable:(id)a0;
- (void)removeReceivingObserver:(id)a0;
- (void)startSharingTripWithMessagesGroup:(id)a0 completion:(id /* block */)a1;
- (void)fetchSharingIdentityWithCompletion:(id /* block */)a0;
- (void)destinationDidUpdateForSharedTrip:(id)a0;
- (void)purgeExpiredBlockedTripIdentifiers;
- (void)stopSharingTripWithMessagesGroup:(id)a0;
- (void)checkinWithCompletion:(id /* block */)a0;
- (BOOL)_isMapsInstalled;
- (void)dealloc;
- (void)subscribeToSharedTripUpdatesWithIdentifier:(id)a0 completion:(id /* block */)a1;
- (void)sharingIdentityDidChange:(id)a0;
- (void)addReceivingObserver:(id)a0;
- (BOOL)isSharingWithContact:(id)a0;
- (void)_purgeExpiredBlockedTripIdentifiers;
- (void)_checkinWithCompletion:(id /* block */)a0;
- (void)addSendingObserver:(id)a0;
- (BOOL)_supportsArchivingSharingState;
- (void)sharedTripDidBecomeAvailable:(id)a0;
- (void)refreshSharingIdentityWithCompletion:(id /* block */)a0;
- (void)_blockSharedTrip:(id)a0;
- (void)_validateCurrentConfigurationWithCompletion:(id /* block */)a0;
- (void)_stopSharingTripWithContacts:(id)a0;
- (void)_stopSharingWithContact:(id)a0 completion:(id /* block */)a1;
- (void)_reportUserConfirmationOfSharingIdentity:(id)a0 completion:(id /* block */)a1;
- (void)_stopSharingTrip;
- (void)blockSharedTrip:(id)a0;
- (void)sharedTripDidStartSharingWithIdentifier:(id)a0;
- (void)_subscribeToSharedTripUpdatesWithIdentifier:(id)a0 completion:(id /* block */)a1;
- (void)unsubscribeFromSharedTripUpdatesWithIdentifier:(id)a0 completion:(id /* block */)a1;
- (void)_stopSharingTripWithMessagesGroup:(id)a0;
- (void)removeSendingObserver:(id)a0;

@end
